// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License. See LICENSE in the project root for license information.
// Code generated by Microsoft (R) AutoRest Code Generator.
// Changes may cause incorrect behavior and will be lost if the code is regenerated.
// SPDX-License-Identifier: MIT

package cosmosdbdatabase_test

import (
	"context"
	"net/http"
	"testing"

	"github.com/Azure/azure-sdk-for-go/sdk/azcore"

	azfake "github.com/Azure/azure-sdk-for-go/sdk/azcore/fake"
	"github.com/Azure/azure-sdk-for-go/sdk/azcore/runtime"
	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"

	"reflect"

	"github.com/stretchr/testify/suite"

	"github.com/microsoft/fabric-sdk-go/fabric"
	"github.com/microsoft/fabric-sdk-go/fabric/cosmosdbdatabase"
	"github.com/microsoft/fabric-sdk-go/fabric/cosmosdbdatabase/fake"
)

var err error

type FakeTestSuite struct {
	suite.Suite

	ctx  context.Context
	cred azcore.TokenCredential

	serverFactory *fake.ServerFactory
	clientFactory *cosmosdbdatabase.ClientFactory
}

func (testsuite *FakeTestSuite) SetupSuite() {
	testsuite.ctx = context.Background()
	testsuite.cred = &azfake.TokenCredential{}

	testsuite.serverFactory = &fake.ServerFactory{}
	testsuite.clientFactory, err = cosmosdbdatabase.NewClientFactory(testsuite.cred, nil, &fabric.ClientOptions{
		ClientOptions: azcore.ClientOptions{
			Transport: fake.NewServerFactoryTransport(testsuite.serverFactory),
		},
	})
	testsuite.Require().NoError(err, "Failed to create client factory")
}

func TestFakeTest(t *testing.T) {
	suite.Run(t, new(FakeTestSuite))
}

func (testsuite *FakeTestSuite) TestItems_ListCosmosDBDatabases() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"List Cosmos DB Databases in workspace example"},
	})
	var exampleWorkspaceID string
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"

	exampleRes := cosmosdbdatabase.CosmosDBDatabases{
		Value: []cosmosdbdatabase.CosmosDBDatabase{
			{
				Type:        to.Ptr(cosmosdbdatabase.ItemTypeCosmosDBDatabase),
				Description: to.Ptr("A Cosmos DB Database description."),
				DisplayName: to.Ptr("Cosmos DB Database Name 1"),
				ID:          to.Ptr("3546052c-ae64-4526-b1a8-52af7761426f"),
				WorkspaceID: to.Ptr("cfafbeb1-8037-4d0c-896e-a46fb27ff229"),
			},
			{
				Type:        to.Ptr(cosmosdbdatabase.ItemTypeCosmosDBDatabase),
				Description: to.Ptr("A Cosmos DB Database description."),
				DisplayName: to.Ptr("Cosmos DB Database Name 2"),
				ID:          to.Ptr("f697fb63-abd4-4399-9548-be7e3c3c0dac"),
				WorkspaceID: to.Ptr("cfafbeb1-8037-4d0c-896e-a46fb27ff229"),
			}},
	}

	testsuite.serverFactory.ItemsServer.NewListCosmosDBDatabasesPager = func(workspaceID string, options *cosmosdbdatabase.ItemsClientListCosmosDBDatabasesOptions) (resp azfake.PagerResponder[cosmosdbdatabase.ItemsClientListCosmosDBDatabasesResponse]) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		resp = azfake.PagerResponder[cosmosdbdatabase.ItemsClientListCosmosDBDatabasesResponse]{}
		resp.AddPage(http.StatusOK, cosmosdbdatabase.ItemsClientListCosmosDBDatabasesResponse{CosmosDBDatabases: exampleRes}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	pager := client.NewListCosmosDBDatabasesPager(exampleWorkspaceID, &cosmosdbdatabase.ItemsClientListCosmosDBDatabasesOptions{ContinuationToken: nil})
	for pager.More() {
		nextResult, err := pager.NextPage(ctx)
		testsuite.Require().NoError(err, "Failed to advance page for example ")
		testsuite.Require().True(reflect.DeepEqual(exampleRes, nextResult.CosmosDBDatabases))
		if err == nil {
			break
		}
	}
}

func (testsuite *FakeTestSuite) TestItems_CreateCosmosDBDatabase() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Create a Cosmos DB Database example"},
	})
	var exampleWorkspaceID string
	var exampleCreateCosmosDBDatabaseRequest cosmosdbdatabase.CreateCosmosDBDatabaseRequest
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"
	exampleCreateCosmosDBDatabaseRequest = cosmosdbdatabase.CreateCosmosDBDatabaseRequest{
		Description: to.Ptr("A Cosmos DB Database description."),
		DisplayName: to.Ptr("Cosmos DB Database 1"),
	}

	testsuite.serverFactory.ItemsServer.BeginCreateCosmosDBDatabase = func(ctx context.Context, workspaceID string, createCosmosDBDatabaseRequest cosmosdbdatabase.CreateCosmosDBDatabaseRequest, options *cosmosdbdatabase.ItemsClientBeginCreateCosmosDBDatabaseOptions) (resp azfake.PollerResponder[cosmosdbdatabase.ItemsClientCreateCosmosDBDatabaseResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().True(reflect.DeepEqual(exampleCreateCosmosDBDatabaseRequest, createCosmosDBDatabaseRequest))
		resp = azfake.PollerResponder[cosmosdbdatabase.ItemsClientCreateCosmosDBDatabaseResponse]{}
		resp.SetTerminalResponse(http.StatusCreated, cosmosdbdatabase.ItemsClientCreateCosmosDBDatabaseResponse{}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	poller, err := client.BeginCreateCosmosDBDatabase(ctx, exampleWorkspaceID, exampleCreateCosmosDBDatabaseRequest, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
	_, err = poller.PollUntilDone(ctx, nil)
	testsuite.Require().NoError(err, "Failed to get LRO result for example ")

	// From example
	ctx = runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Create a Cosmos DB Database with definition example"},
	})
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"
	exampleCreateCosmosDBDatabaseRequest = cosmosdbdatabase.CreateCosmosDBDatabaseRequest{
		Description: to.Ptr("A Cosmos DB Database description."),
		Definition: &cosmosdbdatabase.Definition{
			Parts: []cosmosdbdatabase.DefinitionPart{
				{
					Path:        to.Ptr("definition.json"),
					Payload:     to.Ptr("ewogICIkc2NoZW1hIjogImh0dHBzOi8vZGV2ZWxvcGVyLm1pY3Jvc29mdC5jb20vanNvbi1zY2hlbWFzL2ZhYnJpYy9pdGVtL0Nvc21vc0RCL2RlZmluaXRpb24vQ29zbW9zREIvMi4wLjAvc2NoZW1hLmpzb24iLAogICJjb250YWluZXJzIjogWwogICAgewogICAgICAib3B0aW9ucyI6IHsKICAgICAgICAiYXV0b3NjYWxlU2V0dGluZ3MiOiB7CiAgICAgICAgICAibWF4VGhyb3VnaHB1dCI6IDUwMDAKICAgICAgICB9CiAgICAgIH0sCiAgICAgICJyZXNvdXJjZSI6IHsKICAgICAgICAiaWQiOiAiU2FtcGxlRGF0YSIsCiAgICAgICAgImNvbXB1dGVkUHJvcGVydGllcyI6IFtdLAogICAgICAgICJjb25mbGljdFJlc29sdXRpb25Qb2xpY3kiOiB7CiAgICAgICAgICAibW9kZSI6ICJMYXN0V3JpdGVyV2lucyIsCiAgICAgICAgICAiY29uZmxpY3RSZXNvbHV0aW9uUGF0aCI6ICIvX3RzIiwKICAgICAgICAgICJjb25mbGljdFJlc29sdXRpb25Qcm9jZWR1cmUiOiAiIgogICAgICAgIH0sCiAgICAgICAgImdlb3NwYXRpYWxDb25maWciOiB7CiAgICAgICAgICAidHlwZSI6ICJHZW9ncmFwaHkiCiAgICAgICAgfSwKICAgICAgICAiaW5kZXhpbmdQb2xpY3kiOiB7CiAgICAgICAgICAiYXV0b21hdGljIjogdHJ1ZSwKICAgICAgICAgICJpbmRleGluZ01vZGUiOiAiQ29uc2lzdGVudCIsCiAgICAgICAgICAiaW5jbHVkZWRQYXRocyI6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICJwYXRoIjogIi8qIiwKICAgICAgICAgICAgICAiaW5kZXhlcyI6IFtdCiAgICAgICAgICAgIH0KICAgICAgICAgIF0sCiAgICAgICAgICAiZXhjbHVkZWRQYXRocyI6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICJwYXRoIjogIi9cIl9ldGFnXCIvPyIKICAgICAgICAgICAgfQogICAgICAgICAgXSwKICAgICAgICAgICJjb21wb3NpdGVJbmRleGVzIjogW10sCiAgICAgICAgICAic3BhdGlhbEluZGV4ZXMiOiBbXSwKICAgICAgICAgICJ2ZWN0b3JJbmRleGVzIjogW10sCiAgICAgICAgICAiZnVsbFRleHRJbmRleGVzIjogW10KICAgICAgICB9LAogICAgICAgICJwYXJ0aXRpb25LZXkiOiB7CiAgICAgICAgICAicGF0aHMiOiBbCiAgICAgICAgICAgICIvY2F0ZWdvcnkiCiAgICAgICAgICBdLAogICAgICAgICAgImtpbmQiOiAiSGFzaCIsCiAgICAgICAgICAidmVyc2lvbiI6IDIKICAgICAgICB9LAogICAgICAgICJ1bmlxdWVLZXlQb2xpY3kiOiB7CiAgICAgICAgICAidW5pcXVlS2V5cyI6IFtdCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgXQp9"),
					PayloadType: to.Ptr(cosmosdbdatabase.PayloadTypeInlineBase64),
				}},
		},
		DisplayName: to.Ptr("Cosmos DB Database 1"),
	}

	testsuite.serverFactory.ItemsServer.BeginCreateCosmosDBDatabase = func(ctx context.Context, workspaceID string, createCosmosDBDatabaseRequest cosmosdbdatabase.CreateCosmosDBDatabaseRequest, options *cosmosdbdatabase.ItemsClientBeginCreateCosmosDBDatabaseOptions) (resp azfake.PollerResponder[cosmosdbdatabase.ItemsClientCreateCosmosDBDatabaseResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().True(reflect.DeepEqual(exampleCreateCosmosDBDatabaseRequest, createCosmosDBDatabaseRequest))
		resp = azfake.PollerResponder[cosmosdbdatabase.ItemsClientCreateCosmosDBDatabaseResponse]{}
		resp.SetTerminalResponse(http.StatusCreated, cosmosdbdatabase.ItemsClientCreateCosmosDBDatabaseResponse{}, nil)
		return
	}

	poller, err = client.BeginCreateCosmosDBDatabase(ctx, exampleWorkspaceID, exampleCreateCosmosDBDatabaseRequest, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
	_, err = poller.PollUntilDone(ctx, nil)
	testsuite.Require().NoError(err, "Failed to get LRO result for example ")
}

func (testsuite *FakeTestSuite) TestItems_GetCosmosDBDatabase() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Get a Cosmos DB Database example"},
	})
	var exampleWorkspaceID string
	var exampleCosmosDbDatabaseID string
	exampleWorkspaceID = "f089354e-8366-4e18-aea3-4cb4a3a50b48"
	exampleCosmosDbDatabaseID = "41ce06d1-d81b-4ea0-bc6d-2ce3dd2f8e87"

	exampleRes := cosmosdbdatabase.CosmosDBDatabase{
		Type:        to.Ptr(cosmosdbdatabase.ItemTypeCosmosDBDatabase),
		Description: to.Ptr("A Cosmos DB Database description."),
		DisplayName: to.Ptr("Cosmos DB Database 1"),
		ID:          to.Ptr("41ce06d1-d81b-4ea0-bc6d-2ce3dd2f8e87"),
		WorkspaceID: to.Ptr("f089354e-8366-4e18-aea3-4cb4a3a50b48"),
	}

	testsuite.serverFactory.ItemsServer.GetCosmosDBDatabase = func(ctx context.Context, workspaceID string, cosmosDbDatabaseID string, options *cosmosdbdatabase.ItemsClientGetCosmosDBDatabaseOptions) (resp azfake.Responder[cosmosdbdatabase.ItemsClientGetCosmosDBDatabaseResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().Equal(exampleCosmosDbDatabaseID, cosmosDbDatabaseID)
		resp = azfake.Responder[cosmosdbdatabase.ItemsClientGetCosmosDBDatabaseResponse]{}
		resp.SetResponse(http.StatusOK, cosmosdbdatabase.ItemsClientGetCosmosDBDatabaseResponse{CosmosDBDatabase: exampleRes}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	res, err := client.GetCosmosDBDatabase(ctx, exampleWorkspaceID, exampleCosmosDbDatabaseID, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
	testsuite.Require().True(reflect.DeepEqual(exampleRes, res.CosmosDBDatabase))
}

func (testsuite *FakeTestSuite) TestItems_UpdateCosmosDBDatabase() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Update a Cosmos DB Database example"},
	})
	var exampleWorkspaceID string
	var exampleCosmosDbDatabaseID string
	var exampleUpdateCosmosDBDatabaseRequest cosmosdbdatabase.UpdateCosmosDBDatabaseRequest
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"
	exampleCosmosDbDatabaseID = "5b218778-e7a5-4d73-8187-f10824047715"
	exampleUpdateCosmosDBDatabaseRequest = cosmosdbdatabase.UpdateCosmosDBDatabaseRequest{
		Description: to.Ptr("Cosmos DB database's new description"),
	}

	exampleRes := cosmosdbdatabase.CosmosDBDatabase{
		Type:        to.Ptr(cosmosdbdatabase.ItemTypeCosmosDBDatabase),
		Description: to.Ptr("Cosmos DB database's new description"),
		DisplayName: to.Ptr("Cosmos DB database's name"),
		ID:          to.Ptr("5b218778-e7a5-4d73-8187-f10824047715"),
		WorkspaceID: to.Ptr("cfafbeb1-8037-4d0c-896e-a46fb27ff229"),
	}

	testsuite.serverFactory.ItemsServer.UpdateCosmosDBDatabase = func(ctx context.Context, workspaceID string, cosmosDbDatabaseID string, updateCosmosDBDatabaseRequest cosmosdbdatabase.UpdateCosmosDBDatabaseRequest, options *cosmosdbdatabase.ItemsClientUpdateCosmosDBDatabaseOptions) (resp azfake.Responder[cosmosdbdatabase.ItemsClientUpdateCosmosDBDatabaseResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().Equal(exampleCosmosDbDatabaseID, cosmosDbDatabaseID)
		testsuite.Require().True(reflect.DeepEqual(exampleUpdateCosmosDBDatabaseRequest, updateCosmosDBDatabaseRequest))
		resp = azfake.Responder[cosmosdbdatabase.ItemsClientUpdateCosmosDBDatabaseResponse]{}
		resp.SetResponse(http.StatusOK, cosmosdbdatabase.ItemsClientUpdateCosmosDBDatabaseResponse{CosmosDBDatabase: exampleRes}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	res, err := client.UpdateCosmosDBDatabase(ctx, exampleWorkspaceID, exampleCosmosDbDatabaseID, exampleUpdateCosmosDBDatabaseRequest, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
	testsuite.Require().True(reflect.DeepEqual(exampleRes, res.CosmosDBDatabase))
}

func (testsuite *FakeTestSuite) TestItems_DeleteCosmosDBDatabase() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Delete a Cosmos DB Database example"},
	})
	var exampleWorkspaceID string
	var exampleCosmosDbDatabaseID string
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"
	exampleCosmosDbDatabaseID = "5b218778-e7a5-4d73-8187-f10824047715"

	testsuite.serverFactory.ItemsServer.DeleteCosmosDBDatabase = func(ctx context.Context, workspaceID string, cosmosDbDatabaseID string, options *cosmosdbdatabase.ItemsClientDeleteCosmosDBDatabaseOptions) (resp azfake.Responder[cosmosdbdatabase.ItemsClientDeleteCosmosDBDatabaseResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().Equal(exampleCosmosDbDatabaseID, cosmosDbDatabaseID)
		resp = azfake.Responder[cosmosdbdatabase.ItemsClientDeleteCosmosDBDatabaseResponse]{}
		resp.SetResponse(http.StatusOK, cosmosdbdatabase.ItemsClientDeleteCosmosDBDatabaseResponse{}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	_, err = client.DeleteCosmosDBDatabase(ctx, exampleWorkspaceID, exampleCosmosDbDatabaseID, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
}

func (testsuite *FakeTestSuite) TestItems_GetCosmosDBDatabaseDefinition() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Get a Cosmos DB Database public definition example"},
	})
	var exampleWorkspaceID string
	var exampleCosmosDbDatabaseID string
	exampleWorkspaceID = "f089354e-8366-4e18-aea3-4cb4a3a50b48"
	exampleCosmosDbDatabaseID = "41ce06d1-d81b-4ea0-bc6d-2ce3dd2f8e87"

	exampleRes := cosmosdbdatabase.DefinitionResponse{
		Definition: &cosmosdbdatabase.Definition{
			Parts: []cosmosdbdatabase.DefinitionPart{
				{
					Path:        to.Ptr("definition.json"),
					Payload:     to.Ptr("ewogICIkc2NoZW1hIjogImh0dHBzOi8vZGV2ZWxvcGVyLm1pY3Jvc29mdC5jb20vanNvbi1zY2hlbWFzL2ZhYnJpYy9pdGVtL0Nvc21vc0RCL2RlZmluaXRpb24vQ29zbW9zREIvMi4wLjAvc2NoZW1hLmpzb24iLAogICJjb250YWluZXJzIjogWwogICAgewogICAgICAib3B0aW9ucyI6IHsKICAgICAgICAiYXV0b3NjYWxlU2V0dGluZ3MiOiB7CiAgICAgICAgICAibWF4VGhyb3VnaHB1dCI6IDUwMDAKICAgICAgICB9CiAgICAgIH0sCiAgICAgICJyZXNvdXJjZSI6IHsKICAgICAgICAiaWQiOiAiU2FtcGxlRGF0YSIsCiAgICAgICAgImNvbXB1dGVkUHJvcGVydGllcyI6IFtdLAogICAgICAgICJjb25mbGljdFJlc29sdXRpb25Qb2xpY3kiOiB7CiAgICAgICAgICAibW9kZSI6ICJMYXN0V3JpdGVyV2lucyIsCiAgICAgICAgICAiY29uZmxpY3RSZXNvbHV0aW9uUGF0aCI6ICIvX3RzIiwKICAgICAgICAgICJjb25mbGljdFJlc29sdXRpb25Qcm9jZWR1cmUiOiAiIgogICAgICAgIH0sCiAgICAgICAgImdlb3NwYXRpYWxDb25maWciOiB7CiAgICAgICAgICAidHlwZSI6ICJHZW9ncmFwaHkiCiAgICAgICAgfSwKICAgICAgICAiaW5kZXhpbmdQb2xpY3kiOiB7CiAgICAgICAgICAiYXV0b21hdGljIjogdHJ1ZSwKICAgICAgICAgICJpbmRleGluZ01vZGUiOiAiQ29uc2lzdGVudCIsCiAgICAgICAgICAiaW5jbHVkZWRQYXRocyI6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICJwYXRoIjogIi8qIiwKICAgICAgICAgICAgICAiaW5kZXhlcyI6IFtdCiAgICAgICAgICAgIH0KICAgICAgICAgIF0sCiAgICAgICAgICAiZXhjbHVkZWRQYXRocyI6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICJwYXRoIjogIi9cIl9ldGFnXCIvPyIKICAgICAgICAgICAgfQogICAgICAgICAgXSwKICAgICAgICAgICJjb21wb3NpdGVJbmRleGVzIjogW10sCiAgICAgICAgICAic3BhdGlhbEluZGV4ZXMiOiBbXSwKICAgICAgICAgICJ2ZWN0b3JJbmRleGVzIjogW10sCiAgICAgICAgICAiZnVsbFRleHRJbmRleGVzIjogW10KICAgICAgICB9LAogICAgICAgICJwYXJ0aXRpb25LZXkiOiB7CiAgICAgICAgICAicGF0aHMiOiBbCiAgICAgICAgICAgICIvY2F0ZWdvcnkiCiAgICAgICAgICBdLAogICAgICAgICAgImtpbmQiOiAiSGFzaCIsCiAgICAgICAgICAidmVyc2lvbiI6IDIKICAgICAgICB9LAogICAgICAgICJ1bmlxdWVLZXlQb2xpY3kiOiB7CiAgICAgICAgICAidW5pcXVlS2V5cyI6IFtdCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgXQp9"),
					PayloadType: to.Ptr(cosmosdbdatabase.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr(".platform"),
					Payload:     to.Ptr("ZG90UGxhdGZvcm1CYXNlNjRTdHJpbmc="),
					PayloadType: to.Ptr(cosmosdbdatabase.PayloadTypeInlineBase64),
				}},
		},
	}

	testsuite.serverFactory.ItemsServer.BeginGetCosmosDBDatabaseDefinition = func(ctx context.Context, workspaceID string, cosmosDbDatabaseID string, options *cosmosdbdatabase.ItemsClientBeginGetCosmosDBDatabaseDefinitionOptions) (resp azfake.PollerResponder[cosmosdbdatabase.ItemsClientGetCosmosDBDatabaseDefinitionResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().Equal(exampleCosmosDbDatabaseID, cosmosDbDatabaseID)
		resp = azfake.PollerResponder[cosmosdbdatabase.ItemsClientGetCosmosDBDatabaseDefinitionResponse]{}
		resp.SetTerminalResponse(http.StatusOK, cosmosdbdatabase.ItemsClientGetCosmosDBDatabaseDefinitionResponse{DefinitionResponse: exampleRes}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	poller, err := client.BeginGetCosmosDBDatabaseDefinition(ctx, exampleWorkspaceID, exampleCosmosDbDatabaseID, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
	res, err := poller.PollUntilDone(ctx, nil)
	testsuite.Require().NoError(err, "Failed to get LRO result for example ")
	testsuite.Require().True(reflect.DeepEqual(exampleRes, res.DefinitionResponse))
}

func (testsuite *FakeTestSuite) TestItems_UpdateCosmosDBDatabaseDefinition() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Update a Cosmos DB Database public definition example"},
	})
	var exampleWorkspaceID string
	var exampleCosmosDbDatabaseID string
	var exampleUpdateCosmosDBDatabaseDefinitionRequest cosmosdbdatabase.UpdateCosmosDBDatabaseDefinitionRequest
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"
	exampleCosmosDbDatabaseID = "5b218778-e7a5-4d73-8187-f10824047715"
	exampleUpdateCosmosDBDatabaseDefinitionRequest = cosmosdbdatabase.UpdateCosmosDBDatabaseDefinitionRequest{
		Definition: &cosmosdbdatabase.Definition{
			Parts: []cosmosdbdatabase.DefinitionPart{
				{
					Path:        to.Ptr("definition.json"),
					Payload:     to.Ptr("ewogICIkc2NoZW1hIjogImh0dHBzOi8vZGV2ZWxvcGVyLm1pY3Jvc29mdC5jb20vanNvbi1zY2hlbWFzL2ZhYnJpYy9pdGVtL0Nvc21vc0RCL2RlZmluaXRpb24vQ29zbW9zREIvMi4wLjAvc2NoZW1hLmpzb24iLAogICJjb250YWluZXJzIjogWwogICAgewogICAgICAib3B0aW9ucyI6IHsKICAgICAgICAiYXV0b3NjYWxlU2V0dGluZ3MiOiB7CiAgICAgICAgICAibWF4VGhyb3VnaHB1dCI6IDUwMDAKICAgICAgICB9CiAgICAgIH0sCiAgICAgICJyZXNvdXJjZSI6IHsKICAgICAgICAiaWQiOiAiU2FtcGxlRGF0YSIsCiAgICAgICAgImNvbXB1dGVkUHJvcGVydGllcyI6IFtdLAogICAgICAgICJjb25mbGljdFJlc29sdXRpb25Qb2xpY3kiOiB7CiAgICAgICAgICAibW9kZSI6ICJMYXN0V3JpdGVyV2lucyIsCiAgICAgICAgICAiY29uZmxpY3RSZXNvbHV0aW9uUGF0aCI6ICIvX3RzIiwKICAgICAgICAgICJjb25mbGljdFJlc29sdXRpb25Qcm9jZWR1cmUiOiAiIgogICAgICAgIH0sCiAgICAgICAgImdlb3NwYXRpYWxDb25maWciOiB7CiAgICAgICAgICAidHlwZSI6ICJHZW9ncmFwaHkiCiAgICAgICAgfSwKICAgICAgICAiaW5kZXhpbmdQb2xpY3kiOiB7CiAgICAgICAgICAiYXV0b21hdGljIjogdHJ1ZSwKICAgICAgICAgICJpbmRleGluZ01vZGUiOiAiQ29uc2lzdGVudCIsCiAgICAgICAgICAiaW5jbHVkZWRQYXRocyI6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICJwYXRoIjogIi8qIiwKICAgICAgICAgICAgICAiaW5kZXhlcyI6IFtdCiAgICAgICAgICAgIH0KICAgICAgICAgIF0sCiAgICAgICAgICAiZXhjbHVkZWRQYXRocyI6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICJwYXRoIjogIi9cIl9ldGFnXCIvPyIKICAgICAgICAgICAgfQogICAgICAgICAgXSwKICAgICAgICAgICJjb21wb3NpdGVJbmRleGVzIjogW10sCiAgICAgICAgICAic3BhdGlhbEluZGV4ZXMiOiBbXSwKICAgICAgICAgICJ2ZWN0b3JJbmRleGVzIjogW10sCiAgICAgICAgICAiZnVsbFRleHRJbmRleGVzIjogW10KICAgICAgICB9LAogICAgICAgICJwYXJ0aXRpb25LZXkiOiB7CiAgICAgICAgICAicGF0aHMiOiBbCiAgICAgICAgICAgICIvY2F0ZWdvcnkiCiAgICAgICAgICBdLAogICAgICAgICAgImtpbmQiOiAiSGFzaCIsCiAgICAgICAgICAidmVyc2lvbiI6IDIKICAgICAgICB9LAogICAgICAgICJ1bmlxdWVLZXlQb2xpY3kiOiB7CiAgICAgICAgICAidW5pcXVlS2V5cyI6IFtdCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgXQp9"),
					PayloadType: to.Ptr(cosmosdbdatabase.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr(".platform"),
					Payload:     to.Ptr("ZG90UGxhdGZvcm1CYXNlNjRTdHJpbmc="),
					PayloadType: to.Ptr(cosmosdbdatabase.PayloadTypeInlineBase64),
				}},
		},
	}

	testsuite.serverFactory.ItemsServer.BeginUpdateCosmosDBDatabaseDefinition = func(ctx context.Context, workspaceID string, cosmosDbDatabaseID string, updateCosmosDBDatabaseDefinitionRequest cosmosdbdatabase.UpdateCosmosDBDatabaseDefinitionRequest, options *cosmosdbdatabase.ItemsClientBeginUpdateCosmosDBDatabaseDefinitionOptions) (resp azfake.PollerResponder[cosmosdbdatabase.ItemsClientUpdateCosmosDBDatabaseDefinitionResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().Equal(exampleCosmosDbDatabaseID, cosmosDbDatabaseID)
		testsuite.Require().True(reflect.DeepEqual(exampleUpdateCosmosDBDatabaseDefinitionRequest, updateCosmosDBDatabaseDefinitionRequest))
		resp = azfake.PollerResponder[cosmosdbdatabase.ItemsClientUpdateCosmosDBDatabaseDefinitionResponse]{}
		resp.SetTerminalResponse(http.StatusOK, cosmosdbdatabase.ItemsClientUpdateCosmosDBDatabaseDefinitionResponse{}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	poller, err := client.BeginUpdateCosmosDBDatabaseDefinition(ctx, exampleWorkspaceID, exampleCosmosDbDatabaseID, exampleUpdateCosmosDBDatabaseDefinitionRequest, &cosmosdbdatabase.ItemsClientBeginUpdateCosmosDBDatabaseDefinitionOptions{UpdateMetadata: to.Ptr(true)})
	testsuite.Require().NoError(err, "Failed to get result for example ")
	_, err = poller.PollUntilDone(ctx, nil)
	testsuite.Require().NoError(err, "Failed to get LRO result for example ")
}
