// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License. See LICENSE in the project root for license information.
// Code generated by Microsoft (R) AutoRest Code Generator.
// Changes may cause incorrect behavior and will be lost if the code is regenerated.
// SPDX-License-Identifier: MIT

package ontology_test

import (
	"context"
	"net/http"
	"testing"

	"github.com/Azure/azure-sdk-for-go/sdk/azcore"

	azfake "github.com/Azure/azure-sdk-for-go/sdk/azcore/fake"
	"github.com/Azure/azure-sdk-for-go/sdk/azcore/runtime"
	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"

	"reflect"

	"github.com/stretchr/testify/suite"

	"github.com/microsoft/fabric-sdk-go/fabric"
	"github.com/microsoft/fabric-sdk-go/fabric/ontology"
	"github.com/microsoft/fabric-sdk-go/fabric/ontology/fake"
)

var err error

type FakeTestSuite struct {
	suite.Suite

	ctx  context.Context
	cred azcore.TokenCredential

	serverFactory *fake.ServerFactory
	clientFactory *ontology.ClientFactory
}

func (testsuite *FakeTestSuite) SetupSuite() {
	testsuite.ctx = context.Background()
	testsuite.cred = &azfake.TokenCredential{}

	testsuite.serverFactory = &fake.ServerFactory{}
	testsuite.clientFactory, err = ontology.NewClientFactory(testsuite.cred, nil, &fabric.ClientOptions{
		ClientOptions: azcore.ClientOptions{
			Transport: fake.NewServerFactoryTransport(testsuite.serverFactory),
		},
	})
	testsuite.Require().NoError(err, "Failed to create client factory")
}

func TestFakeTest(t *testing.T) {
	suite.Run(t, new(FakeTestSuite))
}

func (testsuite *FakeTestSuite) TestItems_ListOntologies() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"List ontologies in workspace example"},
	})
	var exampleWorkspaceID string
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"

	exampleRes := ontology.Ontologies{
		Value: []ontology.Ontology{
			{
				Type:        to.Ptr(ontology.ItemTypeOntology),
				Description: to.Ptr("An ontology description."),
				DisplayName: to.Ptr("Ontology Name 1"),
				ID:          to.Ptr("3546052c-ae64-4526-b1a8-52af7761426f"),
				WorkspaceID: to.Ptr("cfafbeb1-8037-4d0c-896e-a46fb27ff229"),
			},
			{
				Type:        to.Ptr(ontology.ItemTypeOntology),
				Description: to.Ptr("An ontology description."),
				DisplayName: to.Ptr("Ontology Name 2"),
				ID:          to.Ptr("f697fb63-abd4-4399-9548-be7e3c3c0dac"),
				WorkspaceID: to.Ptr("cfafbeb1-8037-4d0c-896e-a46fb27ff229"),
			}},
	}

	testsuite.serverFactory.ItemsServer.NewListOntologiesPager = func(workspaceID string, options *ontology.ItemsClientListOntologiesOptions) (resp azfake.PagerResponder[ontology.ItemsClientListOntologiesResponse]) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		resp = azfake.PagerResponder[ontology.ItemsClientListOntologiesResponse]{}
		resp.AddPage(http.StatusOK, ontology.ItemsClientListOntologiesResponse{Ontologies: exampleRes}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	pager := client.NewListOntologiesPager(exampleWorkspaceID, &ontology.ItemsClientListOntologiesOptions{ContinuationToken: nil})
	for pager.More() {
		nextResult, err := pager.NextPage(ctx)
		testsuite.Require().NoError(err, "Failed to advance page for example ")
		testsuite.Require().True(reflect.DeepEqual(exampleRes, nextResult.Ontologies))
		if err == nil {
			break
		}
	}
}

func (testsuite *FakeTestSuite) TestItems_CreateOntology() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Create an ontology example"},
	})
	var exampleWorkspaceID string
	var exampleCreateOntologyRequest ontology.CreateOntologyRequest
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"
	exampleCreateOntologyRequest = ontology.CreateOntologyRequest{
		Description: to.Ptr("An ontology description."),
		DisplayName: to.Ptr("Ontology 1"),
	}

	testsuite.serverFactory.ItemsServer.BeginCreateOntology = func(ctx context.Context, workspaceID string, createOntologyRequest ontology.CreateOntologyRequest, options *ontology.ItemsClientBeginCreateOntologyOptions) (resp azfake.PollerResponder[ontology.ItemsClientCreateOntologyResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().True(reflect.DeepEqual(exampleCreateOntologyRequest, createOntologyRequest))
		resp = azfake.PollerResponder[ontology.ItemsClientCreateOntologyResponse]{}
		resp.SetTerminalResponse(http.StatusCreated, ontology.ItemsClientCreateOntologyResponse{}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	poller, err := client.BeginCreateOntology(ctx, exampleWorkspaceID, exampleCreateOntologyRequest, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
	_, err = poller.PollUntilDone(ctx, nil)
	testsuite.Require().NoError(err, "Failed to get LRO result for example ")

	// From example
	ctx = runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Create an ontology with public definition example"},
	})
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"
	exampleCreateOntologyRequest = ontology.CreateOntologyRequest{
		Description: to.Ptr("An ontology description."),
		Definition: &ontology.Definition{
			Parts: []ontology.DefinitionPart{
				{
					Path:        to.Ptr("definition.json"),
					Payload:     to.Ptr("e30="),
					PayloadType: to.Ptr(ontology.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr("EntityTypes/8813598896083/definition.json"),
					Payload:     to.Ptr("ew0KICAiaWQiOiAiODgxMzU5ODg5NjA4MyIsDQogICJuYW1lc3BhY2UiOiAidXNlcnR5cGVzIiwNCiAgImJhc2VFbnRpdHlUeXBlSWQiOiBudWxsLA0KICAibmFtZSI6ICJFcXVpcG1lbnQxIiwNCiAgImVudGl0eUlkUGFydHMiOiBbDQogICAgIjMxMTcwNjgwMzYzNzQ1OTQwMTMiDQogIF0sDQogICJkaXNwbGF5TmFtZVByb3BlcnR5SWQiOiAiMzExNzA2ODAzNjM3NDU5NDAxMyIsDQogICJuYW1lc3BhY2VUeXBlIjogIkN1c3RvbSIsDQogICJ2aXNpYmlsaXR5IjogIlZpc2libGUiLA0KICAicHJvcGVydGllcyI6IFsNCiAgICB7DQogICAgICAiaWQiOiAiMzExNzA2ODAzNjM3NDU5NDAxMyIsDQogICAgICAibmFtZSI6ICJEaXNwbGF5TmFtZSIsDQogICAgICAicmVkZWZpbmVzIjogbnVsbCwNCiAgICAgICJiYXNlVHlwZU5hbWVzcGFjZVR5cGUiOiBudWxsLA0KICAgICAgInZhbHVlVHlwZSI6ICJTdHJpbmciDQogICAgfSwNCiAgICB7DQogICAgICAiaWQiOiAiMzExNzA2ODAzMTk1MDAwMDMzMSIsDQogICAgICAibmFtZSI6ICJNYW51ZmFjdHVyZXIiLA0KICAgICAgInJlZGVmaW5lcyI6IG51bGwsDQogICAgICAiYmFzZVR5cGVOYW1lc3BhY2VUeXBlIjogbnVsbCwNCiAgICAgICJ2YWx1ZVR5cGUiOiAiU3RyaW5nIg0KICAgIH0NCiAgXSwNCiAgInRpbWVzZXJpZXNQcm9wZXJ0aWVzIjogWw0KICAgIHsNCiAgICAgICJpZCI6ICIzMTE0NTg0OTgxMzY4Nzk2OTUzIiwNCiAgICAgICJuYW1lIjogIlByZWNpc2VUaW1lc3RhbXAiLA0KICAgICAgInJlZGVmaW5lcyI6IG51bGwsDQogICAgICAiYmFzZVR5cGVOYW1lc3BhY2VUeXBlIjogbnVsbCwNCiAgICAgICJ2YWx1ZVR5cGUiOiAiRGF0ZVRpbWUiDQogICAgfSwNCiAgICB7DQogICAgICAiaWQiOiAiMzExNDU4NDk3OTc0MzMyMDkzNCIsDQogICAgICAibmFtZSI6ICJOYW1lIiwNCiAgICAgICJyZWRlZmluZXMiOiBudWxsLA0KICAgICAgImJhc2VUeXBlTmFtZXNwYWNlVHlwZSI6IG51bGwsDQogICAgICAidmFsdWVUeXBlIjogIlN0cmluZyINCiAgICB9LA0KICAgIHsNCiAgICAgICJpZCI6ICIzMTE0NTg0OTc3NTYyNjc5NjcyIiwNCiAgICAgICJuYW1lIjogIlRlbXBlcmF0dXJlIiwNCiAgICAgICJyZWRlZmluZXMiOiBudWxsLA0KICAgICAgImJhc2VUeXBlTmFtZXNwYWNlVHlwZSI6IG51bGwsDQogICAgICAidmFsdWVUeXBlIjogIkRvdWJsZSINCiAgICB9DQogIF0NCn0="),
					PayloadType: to.Ptr(ontology.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr(".platform"),
					Payload:     to.Ptr("ZG90UGxhdGZvcm1CYXNlNjRTdHJpbmc="),
					PayloadType: to.Ptr(ontology.PayloadTypeInlineBase64),
				}},
		},
		DisplayName: to.Ptr("Ontology_1"),
	}

	testsuite.serverFactory.ItemsServer.BeginCreateOntology = func(ctx context.Context, workspaceID string, createOntologyRequest ontology.CreateOntologyRequest, options *ontology.ItemsClientBeginCreateOntologyOptions) (resp azfake.PollerResponder[ontology.ItemsClientCreateOntologyResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().True(reflect.DeepEqual(exampleCreateOntologyRequest, createOntologyRequest))
		resp = azfake.PollerResponder[ontology.ItemsClientCreateOntologyResponse]{}
		resp.SetTerminalResponse(http.StatusCreated, ontology.ItemsClientCreateOntologyResponse{}, nil)
		return
	}

	poller, err = client.BeginCreateOntology(ctx, exampleWorkspaceID, exampleCreateOntologyRequest, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
	_, err = poller.PollUntilDone(ctx, nil)
	testsuite.Require().NoError(err, "Failed to get LRO result for example ")
}

func (testsuite *FakeTestSuite) TestItems_GetOntology() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Get an ontology example"},
	})
	var exampleWorkspaceID string
	var exampleOntologyID string
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"
	exampleOntologyID = "41ce06d1-d81b-4ea0-bc6d-2ce3dd2f8e87"

	exampleRes := ontology.Ontology{
		Type:        to.Ptr(ontology.ItemTypeOntology),
		Description: to.Ptr("An ontology description."),
		DisplayName: to.Ptr("Ontology 1"),
		ID:          to.Ptr("41ce06d1-d81b-4ea0-bc6d-2ce3dd2f8e87"),
		WorkspaceID: to.Ptr("cfafbeb1-8037-4d0c-896e-a46fb27ff229"),
	}

	testsuite.serverFactory.ItemsServer.GetOntology = func(ctx context.Context, workspaceID string, ontologyID string, options *ontology.ItemsClientGetOntologyOptions) (resp azfake.Responder[ontology.ItemsClientGetOntologyResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().Equal(exampleOntologyID, ontologyID)
		resp = azfake.Responder[ontology.ItemsClientGetOntologyResponse]{}
		resp.SetResponse(http.StatusOK, ontology.ItemsClientGetOntologyResponse{Ontology: exampleRes}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	res, err := client.GetOntology(ctx, exampleWorkspaceID, exampleOntologyID, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
	testsuite.Require().True(reflect.DeepEqual(exampleRes, res.Ontology))
}

func (testsuite *FakeTestSuite) TestItems_UpdateOntology() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Update an ontology example"},
	})
	var exampleWorkspaceID string
	var exampleOntologyID string
	var exampleUpdateOntologyRequest ontology.UpdateOntologyRequest
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"
	exampleOntologyID = "5b218778-e7a5-4d73-8187-f10824047715"
	exampleUpdateOntologyRequest = ontology.UpdateOntologyRequest{
		Description: to.Ptr("A new description for ontology."),
		DisplayName: to.Ptr("Ontology_New_Name"),
	}

	exampleRes := ontology.Ontology{
		Type:        to.Ptr(ontology.ItemTypeOntology),
		Description: to.Ptr("A new description for ontology."),
		DisplayName: to.Ptr("Ontology_New_Name"),
		ID:          to.Ptr("5b218778-e7a5-4d73-8187-f10824047715"),
		WorkspaceID: to.Ptr("cfafbeb1-8037-4d0c-896e-a46fb27ff229"),
	}

	testsuite.serverFactory.ItemsServer.UpdateOntology = func(ctx context.Context, workspaceID string, ontologyID string, updateOntologyRequest ontology.UpdateOntologyRequest, options *ontology.ItemsClientUpdateOntologyOptions) (resp azfake.Responder[ontology.ItemsClientUpdateOntologyResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().Equal(exampleOntologyID, ontologyID)
		testsuite.Require().True(reflect.DeepEqual(exampleUpdateOntologyRequest, updateOntologyRequest))
		resp = azfake.Responder[ontology.ItemsClientUpdateOntologyResponse]{}
		resp.SetResponse(http.StatusOK, ontology.ItemsClientUpdateOntologyResponse{Ontology: exampleRes}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	res, err := client.UpdateOntology(ctx, exampleWorkspaceID, exampleOntologyID, exampleUpdateOntologyRequest, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
	testsuite.Require().True(reflect.DeepEqual(exampleRes, res.Ontology))
}

func (testsuite *FakeTestSuite) TestItems_DeleteOntology() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Delete an ontology example"},
	})
	var exampleWorkspaceID string
	var exampleOntologyID string
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"
	exampleOntologyID = "5b218778-e7a5-4d73-8187-f10824047715"

	testsuite.serverFactory.ItemsServer.DeleteOntology = func(ctx context.Context, workspaceID string, ontologyID string, options *ontology.ItemsClientDeleteOntologyOptions) (resp azfake.Responder[ontology.ItemsClientDeleteOntologyResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().Equal(exampleOntologyID, ontologyID)
		resp = azfake.Responder[ontology.ItemsClientDeleteOntologyResponse]{}
		resp.SetResponse(http.StatusOK, ontology.ItemsClientDeleteOntologyResponse{}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	_, err = client.DeleteOntology(ctx, exampleWorkspaceID, exampleOntologyID, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
}

func (testsuite *FakeTestSuite) TestItems_GetOntologyDefinition() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Get a ontology definition example"},
	})
	var exampleWorkspaceID string
	var exampleOntologyID string
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"
	exampleOntologyID = "5b218778-e7a5-4d73-8187-f10824047715"

	exampleRes := ontology.DefinitionResponse{
		Definition: &ontology.Definition{
			Parts: []ontology.DefinitionPart{
				{
					Path:        to.Ptr("definition.json"),
					Payload:     to.Ptr("e30="),
					PayloadType: to.Ptr(ontology.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr("EntityTypes/8813598896083/definition.json"),
					Payload:     to.Ptr("ew0KICAiaWQiOiAiODgxMzU5ODg5NjA4MyIsDQogICJuYW1lc3BhY2UiOiAidXNlcnR5cGVzIiwNCiAgImJhc2VFbnRpdHlUeXBlSWQiOiBudWxsLA0KICAibmFtZSI6ICJFcXVpcG1lbnQxIiwNCiAgImVudGl0eUlkUGFydHMiOiBbDQogICAgIjMxMTcwNjgwMzYzNzQ1OTQwMTMiDQogIF0sDQogICJkaXNwbGF5TmFtZVByb3BlcnR5SWQiOiAiMzExNzA2ODAzNjM3NDU5NDAxMyIsDQogICJuYW1lc3BhY2VUeXBlIjogIkN1c3RvbSIsDQogICJ2aXNpYmlsaXR5IjogIlZpc2libGUiLA0KICAicHJvcGVydGllcyI6IFsNCiAgICB7DQogICAgICAiaWQiOiAiMzExNzA2ODAzNjM3NDU5NDAxMyIsDQogICAgICAibmFtZSI6ICJEaXNwbGF5TmFtZSIsDQogICAgICAicmVkZWZpbmVzIjogbnVsbCwNCiAgICAgICJiYXNlVHlwZU5hbWVzcGFjZVR5cGUiOiBudWxsLA0KICAgICAgInZhbHVlVHlwZSI6ICJTdHJpbmciDQogICAgfSwNCiAgICB7DQogICAgICAiaWQiOiAiMzExNzA2ODAzMTk1MDAwMDMzMSIsDQogICAgICAibmFtZSI6ICJNYW51ZmFjdHVyZXIiLA0KICAgICAgInJlZGVmaW5lcyI6IG51bGwsDQogICAgICAiYmFzZVR5cGVOYW1lc3BhY2VUeXBlIjogbnVsbCwNCiAgICAgICJ2YWx1ZVR5cGUiOiAiU3RyaW5nIg0KICAgIH0NCiAgXSwNCiAgInRpbWVzZXJpZXNQcm9wZXJ0aWVzIjogWw0KICAgIHsNCiAgICAgICJpZCI6ICIzMTE0NTg0OTgxMzY4Nzk2OTUzIiwNCiAgICAgICJuYW1lIjogIlByZWNpc2VUaW1lc3RhbXAiLA0KICAgICAgInJlZGVmaW5lcyI6IG51bGwsDQogICAgICAiYmFzZVR5cGVOYW1lc3BhY2VUeXBlIjogbnVsbCwNCiAgICAgICJ2YWx1ZVR5cGUiOiAiRGF0ZVRpbWUiDQogICAgfSwNCiAgICB7DQogICAgICAiaWQiOiAiMzExNDU4NDk3OTc0MzMyMDkzNCIsDQogICAgICAibmFtZSI6ICJOYW1lIiwNCiAgICAgICJyZWRlZmluZXMiOiBudWxsLA0KICAgICAgImJhc2VUeXBlTmFtZXNwYWNlVHlwZSI6IG51bGwsDQogICAgICAidmFsdWVUeXBlIjogIlN0cmluZyINCiAgICB9LA0KICAgIHsNCiAgICAgICJpZCI6ICIzMTE0NTg0OTc3NTYyNjc5NjcyIiwNCiAgICAgICJuYW1lIjogIlRlbXBlcmF0dXJlIiwNCiAgICAgICJyZWRlZmluZXMiOiBudWxsLA0KICAgICAgImJhc2VUeXBlTmFtZXNwYWNlVHlwZSI6IG51bGwsDQogICAgICAidmFsdWVUeXBlIjogIkRvdWJsZSINCiAgICB9DQogIF0NCn0="),
					PayloadType: to.Ptr(ontology.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr(".platform"),
					Payload:     to.Ptr("ZG90UGxhdGZvcm1CYXNlNjRTdHJpbmc="),
					PayloadType: to.Ptr(ontology.PayloadTypeInlineBase64),
				}},
		},
	}

	testsuite.serverFactory.ItemsServer.BeginGetOntologyDefinition = func(ctx context.Context, workspaceID string, ontologyID string, options *ontology.ItemsClientBeginGetOntologyDefinitionOptions) (resp azfake.PollerResponder[ontology.ItemsClientGetOntologyDefinitionResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().Equal(exampleOntologyID, ontologyID)
		resp = azfake.PollerResponder[ontology.ItemsClientGetOntologyDefinitionResponse]{}
		resp.SetTerminalResponse(http.StatusOK, ontology.ItemsClientGetOntologyDefinitionResponse{DefinitionResponse: exampleRes}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	poller, err := client.BeginGetOntologyDefinition(ctx, exampleWorkspaceID, exampleOntologyID, &ontology.ItemsClientBeginGetOntologyDefinitionOptions{Format: nil})
	testsuite.Require().NoError(err, "Failed to get result for example ")
	res, err := poller.PollUntilDone(ctx, nil)
	testsuite.Require().NoError(err, "Failed to get LRO result for example ")
	testsuite.Require().True(reflect.DeepEqual(exampleRes, res.DefinitionResponse))
}

func (testsuite *FakeTestSuite) TestItems_UpdateOntologyDefinition() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Update an ontology definition example"},
	})
	var exampleWorkspaceID string
	var exampleOntologyID string
	var exampleUpdateOntologyDefinitionRequest ontology.UpdateOntologyDefinitionRequest
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"
	exampleOntologyID = "5b218778-e7a5-4d73-8187-f10824047715"
	exampleUpdateOntologyDefinitionRequest = ontology.UpdateOntologyDefinitionRequest{
		Definition: &ontology.Definition{
			Parts: []ontology.DefinitionPart{
				{
					Path:        to.Ptr("definition.json"),
					Payload:     to.Ptr("e30="),
					PayloadType: to.Ptr(ontology.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr("EntityTypes/8813598896083/definition.json"),
					Payload:     to.Ptr("ewogICJpZCI6ICI4ODEzNTk4ODk2MDgzIiwKICAibmFtZXNwYWNlIjogInVzZXJ0eXBlcyIsCiAgImJhc2VFbnRpdHlUeXBlSWQiOiBudWxsLAogICJuYW1lIjogIkVxdWlwbWVudDEiLAogICJlbnRpdHlJZFBhcnRzIjogWwogICAgIjMxMTcwNjgwMzYzNzQ1OTQwMTMiCiAgXSwKICAiZGlzcGxheU5hbWVQcm9wZXJ0eUlkIjogIjMxMTcwNjgwMzYzNzQ1OTQwMTMiLAogICJuYW1lc3BhY2VUeXBlIjogIkN1c3RvbSIsCiAgInZpc2liaWxpdHkiOiAiVmlzaWJsZSIsCiAgInByb3BlcnRpZXMiOiBbCiAgICB7CiAgICAgICJpZCI6ICIzMTE3MDY4MDM2Mzc0NTk0MDEzIiwKICAgICAgIm5hbWUiOiAiRGlzcGxheU5hbWUiLAogICAgICAicmVkZWZpbmVzIjogbnVsbCwKICAgICAgImJhc2VUeXBlTmFtZXNwYWNlVHlwZSI6IG51bGwsCiAgICAgICJ2YWx1ZVR5cGUiOiAiU3RyaW5nIgogICAgfSwKICAgIHsKICAgICAgImlkIjogIjMxMTcwNjgwMzE5NTAwMDAzMzEiLAogICAgICAibmFtZSI6ICJNYW51ZmFjdHVyZXJOYW1lIiwKICAgICAgInJlZGVmaW5lcyI6IG51bGwsCiAgICAgICJiYXNlVHlwZU5hbWVzcGFjZVR5cGUiOiBudWxsLAogICAgICAidmFsdWVUeXBlIjogIlN0cmluZyIKICAgIH0KICBdLAogICJ0aW1lc2VyaWVzUHJvcGVydGllcyI6IFsKICAgIHsKICAgICAgImlkIjogIjMxMTQ1ODQ5ODEzNjg3OTY5NTMiLAogICAgICAibmFtZSI6ICJQcmVjaXNlVGltZXN0YW1wIiwKICAgICAgInJlZGVmaW5lcyI6IG51bGwsCiAgICAgICJiYXNlVHlwZU5hbWVzcGFjZVR5cGUiOiBudWxsLAogICAgICAidmFsdWVUeXBlIjogIkRhdGVUaW1lIgogICAgfSwKICAgIHsKICAgICAgImlkIjogIjMxMTQ1ODQ5Nzk3NDMzMjA5MzQiLAogICAgICAibmFtZSI6ICJOYW1lIiwKICAgICAgInJlZGVmaW5lcyI6IG51bGwsCiAgICAgICJiYXNlVHlwZU5hbWVzcGFjZVR5cGUiOiBudWxsLAogICAgICAidmFsdWVUeXBlIjogIlN0cmluZyIKICAgIH0sCiAgICB7CiAgICAgICJpZCI6ICIzMTE0NTg0OTc3NTYyNjc5NjcyIiwKICAgICAgIm5hbWUiOiAiVGVtcGVyYXR1cmUiLAogICAgICAicmVkZWZpbmVzIjogbnVsbCwKICAgICAgImJhc2VUeXBlTmFtZXNwYWNlVHlwZSI6IG51bGwsCiAgICAgICJ2YWx1ZVR5cGUiOiAiRG91YmxlIgogICAgfQogIF0KfQ=="),
					PayloadType: to.Ptr(ontology.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr("EntityTypes/8813598896083/DataBindings/66253a71-c26f-4c9d-877f-3af5632a4be2.json"),
					Payload:     to.Ptr("ew0KICAiaWQiOiAiNjYyNTNhNzEtYzI2Zi00YzlkLTg3N2YtM2FmNTYzMmE0YmUyIiwNCiAgImRhdGFCaW5kaW5nQ29uZmlndXJhdGlvbiI6IHsNCiAgICAiZGF0YUJpbmRpbmdUeXBlIjogIk5vblRpbWVTZXJpZXMiLA0KICAgICJwcm9wZXJ0eUJpbmRpbmdzIjogWw0KICAgICAgew0KICAgICAgICAic291cmNlQ29sdW1uTmFtZSI6ICJEaXNwbGF5TmFtZSIsDQogICAgICAgICJ0YXJnZXRQcm9wZXJ0eUlkIjogIjMxMTcwNjgwMzYzNzQ1OTQwMTMiDQogICAgICB9LA0KICAgICAgew0KICAgICAgICAic291cmNlQ29sdW1uTmFtZSI6ICJNYW51ZmFjdHVyZXIiLA0KICAgICAgICAidGFyZ2V0UHJvcGVydHlJZCI6ICIzMTE3MDY4MDMxOTUwMDAwMzMxIg0KICAgICAgfQ0KICAgIF0sDQogICAgInNvdXJjZVRhYmxlUHJvcGVydGllcyI6IHsNCiAgICAgICJzb3VyY2VUeXBlIjogIkxha2Vob3VzZVRhYmxlIiwNCiAgICAgICJ3b3Jrc3BhY2VJZCI6ICI1ODBmNDEwZS03MzNkLTQzYmQtOGE4Ny1iZTEyYjUzNmY3ZmYiLA0KICAgICAgIml0ZW1JZCI6ICJkMGQ4NjNiYy00OGUxLTQ1YjItOGY0Yi01NDc5NWM5N2JhNzEiLA0KICAgICAgInNvdXJjZVRhYmxlTmFtZSI6ICJlcXVpcG1lbnQxbm9udGltZXNlcmllcyIsDQogICAgICAic291cmNlU2NoZW1hIjogImRibyINCiAgICB9DQogIH0NCn0="),
					PayloadType: to.Ptr(ontology.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr(".platform"),
					Payload:     to.Ptr("ZG90UGxhdGZvcm1CYXNlNjRTdHJpbmc="),
					PayloadType: to.Ptr(ontology.PayloadTypeInlineBase64),
				}},
		},
	}

	testsuite.serverFactory.ItemsServer.BeginUpdateOntologyDefinition = func(ctx context.Context, workspaceID string, ontologyID string, updateOntologyDefinitionRequest ontology.UpdateOntologyDefinitionRequest, options *ontology.ItemsClientBeginUpdateOntologyDefinitionOptions) (resp azfake.PollerResponder[ontology.ItemsClientUpdateOntologyDefinitionResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().Equal(exampleOntologyID, ontologyID)
		testsuite.Require().True(reflect.DeepEqual(exampleUpdateOntologyDefinitionRequest, updateOntologyDefinitionRequest))
		resp = azfake.PollerResponder[ontology.ItemsClientUpdateOntologyDefinitionResponse]{}
		resp.SetTerminalResponse(http.StatusOK, ontology.ItemsClientUpdateOntologyDefinitionResponse{}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	poller, err := client.BeginUpdateOntologyDefinition(ctx, exampleWorkspaceID, exampleOntologyID, exampleUpdateOntologyDefinitionRequest, &ontology.ItemsClientBeginUpdateOntologyDefinitionOptions{UpdateMetadata: to.Ptr(true)})
	testsuite.Require().NoError(err, "Failed to get result for example ")
	_, err = poller.PollUntilDone(ctx, nil)
	testsuite.Require().NoError(err, "Failed to get LRO result for example ")
}
