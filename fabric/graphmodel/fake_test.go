// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License. See LICENSE in the project root for license information.
// Code generated by Microsoft (R) AutoRest Code Generator.
// Changes may cause incorrect behavior and will be lost if the code is regenerated.
// SPDX-License-Identifier: MIT

package graphmodel_test

import (
	"context"
	"net/http"
	"testing"

	"github.com/Azure/azure-sdk-for-go/sdk/azcore"

	azfake "github.com/Azure/azure-sdk-for-go/sdk/azcore/fake"
	"github.com/Azure/azure-sdk-for-go/sdk/azcore/runtime"
	"github.com/Azure/azure-sdk-for-go/sdk/azcore/to"

	"reflect"

	"github.com/stretchr/testify/suite"

	"github.com/microsoft/fabric-sdk-go/fabric"
	"github.com/microsoft/fabric-sdk-go/fabric/graphmodel"
	"github.com/microsoft/fabric-sdk-go/fabric/graphmodel/fake"
)

var err error

type FakeTestSuite struct {
	suite.Suite

	ctx  context.Context
	cred azcore.TokenCredential

	serverFactory *fake.ServerFactory
	clientFactory *graphmodel.ClientFactory
}

func (testsuite *FakeTestSuite) SetupSuite() {
	testsuite.ctx = context.Background()
	testsuite.cred = &azfake.TokenCredential{}

	testsuite.serverFactory = &fake.ServerFactory{}
	testsuite.clientFactory, err = graphmodel.NewClientFactory(testsuite.cred, nil, &fabric.ClientOptions{
		ClientOptions: azcore.ClientOptions{
			Transport: fake.NewServerFactoryTransport(testsuite.serverFactory),
		},
	})
	testsuite.Require().NoError(err, "Failed to create client factory")
}

func TestFakeTest(t *testing.T) {
	suite.Run(t, new(FakeTestSuite))
}

func (testsuite *FakeTestSuite) TestItems_ListGraphModels() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"List GraphModels in workspace example"},
	})
	var exampleWorkspaceID string
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"

	exampleRes := graphmodel.GraphModels{
		Value: []graphmodel.GraphModel{
			{
				Type:        to.Ptr(graphmodel.ItemTypeGraphModel),
				Description: to.Ptr("A GraphModel description."),
				DisplayName: to.Ptr("GraphModel Name 1"),
				ID:          to.Ptr("3546052c-ae64-4526-b1a8-52af7761426f"),
				WorkspaceID: to.Ptr("cfafbeb1-8037-4d0c-896e-a46fb27ff229"),
				Properties: &graphmodel.Properties{
					OneLakeRootPath: to.Ptr("https://onelake.dfs.fabric.microsoft.com/f089354e-8366-4e18-aea3-4cb4a3a50b48/41ce06d1-d81b-4ea0-bc6d-2ce3dd2f8e87"),
				},
			},
			{
				Type:        to.Ptr(graphmodel.ItemTypeGraphModel),
				Description: to.Ptr("A GraphModel description."),
				DisplayName: to.Ptr("GraphModel Name 2"),
				ID:          to.Ptr("f697fb63-abd4-4399-9548-be7e3c3c0dac"),
				WorkspaceID: to.Ptr("cfafbeb1-8037-4d0c-896e-a46fb27ff229"),
				Properties: &graphmodel.Properties{
					OneLakeRootPath: to.Ptr("https://onelake.dfs.fabric.microsoft.com/f089354e-8366-4e18-aea3-4cb4a3a50b48/d8f6cf16-3aac-4440-9d76-a03d86b7ae3e"),
				},
			}},
	}

	testsuite.serverFactory.ItemsServer.NewListGraphModelsPager = func(workspaceID string, options *graphmodel.ItemsClientListGraphModelsOptions) (resp azfake.PagerResponder[graphmodel.ItemsClientListGraphModelsResponse]) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		resp = azfake.PagerResponder[graphmodel.ItemsClientListGraphModelsResponse]{}
		resp.AddPage(http.StatusOK, graphmodel.ItemsClientListGraphModelsResponse{GraphModels: exampleRes}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	pager := client.NewListGraphModelsPager(exampleWorkspaceID, &graphmodel.ItemsClientListGraphModelsOptions{ContinuationToken: nil})
	for pager.More() {
		nextResult, err := pager.NextPage(ctx)
		testsuite.Require().NoError(err, "Failed to advance page for example ")
		testsuite.Require().True(reflect.DeepEqual(exampleRes, nextResult.GraphModels))
		if err == nil {
			break
		}
	}
}

func (testsuite *FakeTestSuite) TestItems_CreateGraphModel() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Create a GraphModel example"},
	})
	var exampleWorkspaceID string
	var exampleCreateGraphModelRequest graphmodel.CreateGraphModelRequest
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"
	exampleCreateGraphModelRequest = graphmodel.CreateGraphModelRequest{
		Description: to.Ptr("A GraphModel description."),
		DisplayName: to.Ptr("GraphModel 1"),
	}

	testsuite.serverFactory.ItemsServer.BeginCreateGraphModel = func(ctx context.Context, workspaceID string, createGraphModelRequest graphmodel.CreateGraphModelRequest, options *graphmodel.ItemsClientBeginCreateGraphModelOptions) (resp azfake.PollerResponder[graphmodel.ItemsClientCreateGraphModelResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().True(reflect.DeepEqual(exampleCreateGraphModelRequest, createGraphModelRequest))
		resp = azfake.PollerResponder[graphmodel.ItemsClientCreateGraphModelResponse]{}
		resp.SetTerminalResponse(http.StatusCreated, graphmodel.ItemsClientCreateGraphModelResponse{}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	poller, err := client.BeginCreateGraphModel(ctx, exampleWorkspaceID, exampleCreateGraphModelRequest, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
	_, err = poller.PollUntilDone(ctx, nil)
	testsuite.Require().NoError(err, "Failed to get LRO result for example ")

	// From example
	ctx = runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Create a GraphModel with public definition example"},
	})
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"
	exampleCreateGraphModelRequest = graphmodel.CreateGraphModelRequest{
		Description: to.Ptr("A GraphModel description."),
		Definition: &graphmodel.PublicDefinition{
			Format: to.Ptr(graphmodel.DefinitionFormatJSON),
			Parts: []graphmodel.PublicDefinitionPart{
				{
					Path:        to.Ptr("graphType.json"),
					Payload:     to.Ptr("eyJleGVjdXRhYmxlRm..OWRmNDhhY2ZmZTgifQ=="),
					PayloadType: to.Ptr(graphmodel.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr("graphDefinition.json"),
					Payload:     to.Ptr("eyJleGVjdXRhYmxlRm..OWRmNDhhY2ZmZTgifQ=="),
					PayloadType: to.Ptr(graphmodel.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr("dataSources.json"),
					Payload:     to.Ptr("eyJleGVjdXRhYmxlRm..OWRmNDhhY2ZmZTgifQ=="),
					PayloadType: to.Ptr(graphmodel.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr("stylingConfiguration.json"),
					Payload:     to.Ptr("eyJleGVjdXRhYmxlRm..OWRmNDhhY2ZmZTgifQ=="),
					PayloadType: to.Ptr(graphmodel.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr(".platform"),
					Payload:     to.Ptr("ZG90UGxhdGZvcm1CYXNlNjRTdHJpbmc="),
					PayloadType: to.Ptr(graphmodel.PayloadTypeInlineBase64),
				}},
		},
		DisplayName: to.Ptr("GraphModel 1"),
	}

	testsuite.serverFactory.ItemsServer.BeginCreateGraphModel = func(ctx context.Context, workspaceID string, createGraphModelRequest graphmodel.CreateGraphModelRequest, options *graphmodel.ItemsClientBeginCreateGraphModelOptions) (resp azfake.PollerResponder[graphmodel.ItemsClientCreateGraphModelResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().True(reflect.DeepEqual(exampleCreateGraphModelRequest, createGraphModelRequest))
		resp = azfake.PollerResponder[graphmodel.ItemsClientCreateGraphModelResponse]{}
		resp.SetTerminalResponse(http.StatusCreated, graphmodel.ItemsClientCreateGraphModelResponse{}, nil)
		return
	}

	poller, err = client.BeginCreateGraphModel(ctx, exampleWorkspaceID, exampleCreateGraphModelRequest, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
	_, err = poller.PollUntilDone(ctx, nil)
	testsuite.Require().NoError(err, "Failed to get LRO result for example ")
}

func (testsuite *FakeTestSuite) TestItems_GetGraphModel() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Get a GraphModel example"},
	})
	var exampleWorkspaceID string
	var exampleGraphModelID string
	exampleWorkspaceID = "f089354e-8366-4e18-aea3-4cb4a3a50b48"
	exampleGraphModelID = "41ce06d1-d81b-4ea0-bc6d-2ce3dd2f8e87"

	exampleRes := graphmodel.GraphModel{
		Type:        to.Ptr(graphmodel.ItemTypeGraphModel),
		Description: to.Ptr("A GraphModel description."),
		DisplayName: to.Ptr("GraphModel 1"),
		ID:          to.Ptr("5b218778-e7a5-4d73-8187-f10824047715"),
		WorkspaceID: to.Ptr("cfafbeb1-8037-4d0c-896e-a46fb27ff229"),
		Properties: &graphmodel.Properties{
			OneLakeRootPath: to.Ptr("https://onelake.dfs.fabric.microsoft.com/f089354e-8366-4e18-aea3-4cb4a3a50b48/41ce06d1-d81b-4ea0-bc6d-2ce3dd2f8e87"),
		},
	}

	testsuite.serverFactory.ItemsServer.GetGraphModel = func(ctx context.Context, workspaceID string, graphModelID string, options *graphmodel.ItemsClientGetGraphModelOptions) (resp azfake.Responder[graphmodel.ItemsClientGetGraphModelResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().Equal(exampleGraphModelID, graphModelID)
		resp = azfake.Responder[graphmodel.ItemsClientGetGraphModelResponse]{}
		resp.SetResponse(http.StatusOK, graphmodel.ItemsClientGetGraphModelResponse{GraphModel: exampleRes}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	res, err := client.GetGraphModel(ctx, exampleWorkspaceID, exampleGraphModelID, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
	testsuite.Require().True(reflect.DeepEqual(exampleRes, res.GraphModel))
}

func (testsuite *FakeTestSuite) TestItems_UpdateGraphModel() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Update a GraphModel example"},
	})
	var exampleWorkspaceID string
	var exampleGraphModelID string
	var exampleUpdateGraphModelRequest graphmodel.UpdateGraphModelRequest
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"
	exampleGraphModelID = "5b218778-e7a5-4d73-8187-f10824047715"
	exampleUpdateGraphModelRequest = graphmodel.UpdateGraphModelRequest{
		Description: to.Ptr("GraphModel's New description"),
		DisplayName: to.Ptr("GraphModel's New name"),
	}

	exampleRes := graphmodel.GraphModel{
		Type:        to.Ptr(graphmodel.ItemTypeGraphModel),
		Description: to.Ptr("GraphModel's New description"),
		DisplayName: to.Ptr("GraphModel's New name"),
		ID:          to.Ptr("5b218778-e7a5-4d73-8187-f10824047715"),
		WorkspaceID: to.Ptr("cfafbeb1-8037-4d0c-896e-a46fb27ff229"),
	}

	testsuite.serverFactory.ItemsServer.UpdateGraphModel = func(ctx context.Context, workspaceID string, graphModelID string, updateGraphModelRequest graphmodel.UpdateGraphModelRequest, options *graphmodel.ItemsClientUpdateGraphModelOptions) (resp azfake.Responder[graphmodel.ItemsClientUpdateGraphModelResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().Equal(exampleGraphModelID, graphModelID)
		testsuite.Require().True(reflect.DeepEqual(exampleUpdateGraphModelRequest, updateGraphModelRequest))
		resp = azfake.Responder[graphmodel.ItemsClientUpdateGraphModelResponse]{}
		resp.SetResponse(http.StatusOK, graphmodel.ItemsClientUpdateGraphModelResponse{GraphModel: exampleRes}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	res, err := client.UpdateGraphModel(ctx, exampleWorkspaceID, exampleGraphModelID, exampleUpdateGraphModelRequest, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
	testsuite.Require().True(reflect.DeepEqual(exampleRes, res.GraphModel))
}

func (testsuite *FakeTestSuite) TestItems_DeleteGraphModel() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Delete a GraphModel example"},
	})
	var exampleWorkspaceID string
	var exampleGraphModelID string
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"
	exampleGraphModelID = "5b218778-e7a5-4d73-8187-f10824047715"

	testsuite.serverFactory.ItemsServer.DeleteGraphModel = func(ctx context.Context, workspaceID string, graphModelID string, options *graphmodel.ItemsClientDeleteGraphModelOptions) (resp azfake.Responder[graphmodel.ItemsClientDeleteGraphModelResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().Equal(exampleGraphModelID, graphModelID)
		resp = azfake.Responder[graphmodel.ItemsClientDeleteGraphModelResponse]{}
		resp.SetResponse(http.StatusOK, graphmodel.ItemsClientDeleteGraphModelResponse{}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	_, err = client.DeleteGraphModel(ctx, exampleWorkspaceID, exampleGraphModelID, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
}

func (testsuite *FakeTestSuite) TestItems_GetGraphModelDefinition() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Get a GraphModel public definition example"},
	})
	var exampleWorkspaceID string
	var exampleGraphModelID string
	exampleWorkspaceID = "6e335e92-a2a2-4b5a-970a-bd6a89fbb765"
	exampleGraphModelID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"

	exampleRes := graphmodel.DefinitionResponse{
		Definition: &graphmodel.PublicDefinition{
			Format: to.Ptr(graphmodel.DefinitionFormatJSON),
			Parts: []graphmodel.PublicDefinitionPart{
				{
					Path:        to.Ptr("graphType.json"),
					Payload:     to.Ptr("eyJleGVjdXRhYmxlRm..OWRmNDhhY2ZmZTgifQ=="),
					PayloadType: to.Ptr(graphmodel.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr("graphDefinition.json"),
					Payload:     to.Ptr("eyJleGVjdXRhYmxlRm..OWRmNDhhY2ZmZTgifQ=="),
					PayloadType: to.Ptr(graphmodel.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr("dataSources.json"),
					Payload:     to.Ptr("eyJleGVjdXRhYmxlRm..OWRmNDhhY2ZmZTgifQ=="),
					PayloadType: to.Ptr(graphmodel.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr("stylingConfiguration.json"),
					Payload:     to.Ptr("eyJleGVjdXRhYmxlRm..OWRmNDhhY2ZmZTgifQ=="),
					PayloadType: to.Ptr(graphmodel.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr(".platform"),
					Payload:     to.Ptr("ZG90UGxhdGZvcm1CYXNlNjRTdHJpbmc="),
					PayloadType: to.Ptr(graphmodel.PayloadTypeInlineBase64),
				}},
		},
	}

	testsuite.serverFactory.ItemsServer.BeginGetGraphModelDefinition = func(ctx context.Context, workspaceID string, graphModelID string, options *graphmodel.ItemsClientBeginGetGraphModelDefinitionOptions) (resp azfake.PollerResponder[graphmodel.ItemsClientGetGraphModelDefinitionResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().Equal(exampleGraphModelID, graphModelID)
		resp = azfake.PollerResponder[graphmodel.ItemsClientGetGraphModelDefinitionResponse]{}
		resp.SetTerminalResponse(http.StatusOK, graphmodel.ItemsClientGetGraphModelDefinitionResponse{DefinitionResponse: exampleRes}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	poller, err := client.BeginGetGraphModelDefinition(ctx, exampleWorkspaceID, exampleGraphModelID, &graphmodel.ItemsClientBeginGetGraphModelDefinitionOptions{Format: nil})
	testsuite.Require().NoError(err, "Failed to get result for example ")
	res, err := poller.PollUntilDone(ctx, nil)
	testsuite.Require().NoError(err, "Failed to get LRO result for example ")
	testsuite.Require().True(reflect.DeepEqual(exampleRes, res.DefinitionResponse))
}

func (testsuite *FakeTestSuite) TestItems_UpdateGraphModelDefinition() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Update a GraphModel public definition example"},
	})
	var exampleWorkspaceID string
	var exampleGraphModelID string
	var exampleUpdateGraphModelDefinitionRequest graphmodel.UpdateGraphModelDefinitionRequest
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"
	exampleGraphModelID = "5b218778-e7a5-4d73-8187-f10824047715"
	exampleUpdateGraphModelDefinitionRequest = graphmodel.UpdateGraphModelDefinitionRequest{
		Definition: &graphmodel.PublicDefinition{
			Format: to.Ptr(graphmodel.DefinitionFormatJSON),
			Parts: []graphmodel.PublicDefinitionPart{
				{
					Path:        to.Ptr("graphType.json"),
					Payload:     to.Ptr("eyJleGVjdXRhYmxlRm..OWRmNDhhY2ZmZTgifQ=="),
					PayloadType: to.Ptr(graphmodel.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr("graphDefinition.json"),
					Payload:     to.Ptr("eyJleGVjdXRhYmxlRm..OWRmNDhhY2ZmZTgifQ=="),
					PayloadType: to.Ptr(graphmodel.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr("dataSources.json"),
					Payload:     to.Ptr("eyJleGVjdXRhYmxlRm..OWRmNDhhY2ZmZTgifQ=="),
					PayloadType: to.Ptr(graphmodel.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr("stylingConfiguration.json"),
					Payload:     to.Ptr("eyJleGVjdXRhYmxlRm..OWRmNDhhY2ZmZTgifQ=="),
					PayloadType: to.Ptr(graphmodel.PayloadTypeInlineBase64),
				},
				{
					Path:        to.Ptr(".platform"),
					Payload:     to.Ptr("ZG90UGxhdGZvcm1CYXNlNjRTdHJpbmc="),
					PayloadType: to.Ptr(graphmodel.PayloadTypeInlineBase64),
				}},
		},
	}

	testsuite.serverFactory.ItemsServer.BeginUpdateGraphModelDefinition = func(ctx context.Context, workspaceID string, graphModelID string, updateGraphModelDefinitionRequest graphmodel.UpdateGraphModelDefinitionRequest, options *graphmodel.ItemsClientBeginUpdateGraphModelDefinitionOptions) (resp azfake.PollerResponder[graphmodel.ItemsClientUpdateGraphModelDefinitionResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().Equal(exampleGraphModelID, graphModelID)
		testsuite.Require().True(reflect.DeepEqual(exampleUpdateGraphModelDefinitionRequest, updateGraphModelDefinitionRequest))
		resp = azfake.PollerResponder[graphmodel.ItemsClientUpdateGraphModelDefinitionResponse]{}
		resp.SetTerminalResponse(http.StatusOK, graphmodel.ItemsClientUpdateGraphModelDefinitionResponse{}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	poller, err := client.BeginUpdateGraphModelDefinition(ctx, exampleWorkspaceID, exampleGraphModelID, exampleUpdateGraphModelDefinitionRequest, &graphmodel.ItemsClientBeginUpdateGraphModelDefinitionOptions{UpdateMetadata: to.Ptr(true)})
	testsuite.Require().NoError(err, "Failed to get result for example ")
	_, err = poller.PollUntilDone(ctx, nil)
	testsuite.Require().NoError(err, "Failed to get LRO result for example ")
}

func (testsuite *FakeTestSuite) TestItems_ExecuteQueryPreview() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Execute a graph query example"},
	})
	var exampleWorkspaceID string
	var exampleGraphModelID string
	var examplePreview bool
	var exampleCreateQueryResultRequest graphmodel.ExecuteQueryRequest
	exampleWorkspaceID = "cfafbeb1-8037-4d0c-896e-a46fb27ff229"
	exampleGraphModelID = "5b218778-e7a5-4d73-8187-f10824047715"
	examplePreview = true
	exampleCreateQueryResultRequest = graphmodel.ExecuteQueryRequest{
		Query: to.Ptr("MATCH (node_station:`station`) RETURN TO_JSON_STRING(node_station) AS `station` LIMIT 10;"),
	}

	testsuite.serverFactory.ItemsServer.ExecuteQueryPreview = func(ctx context.Context, workspaceID string, graphModelID string, preview bool, createQueryResultRequest graphmodel.ExecuteQueryRequest, options *graphmodel.ItemsClientExecuteQueryPreviewOptions) (resp azfake.Responder[graphmodel.ItemsClientExecuteQueryPreviewResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().Equal(exampleGraphModelID, graphModelID)
		testsuite.Require().Equal(examplePreview, preview)
		testsuite.Require().True(reflect.DeepEqual(exampleCreateQueryResultRequest, createQueryResultRequest))
		resp = azfake.Responder[graphmodel.ItemsClientExecuteQueryPreviewResponse]{}
		resp.SetResponse(http.StatusOK, graphmodel.ItemsClientExecuteQueryPreviewResponse{}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	_, err = client.ExecuteQueryPreview(ctx, exampleWorkspaceID, exampleGraphModelID, examplePreview, exampleCreateQueryResultRequest, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
}

func (testsuite *FakeTestSuite) TestItems_GetQueryableGraphTypePreview() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Get queryable graph type example"},
	})
	var exampleWorkspaceID string
	var exampleGraphModelID string
	var examplePreview bool
	exampleWorkspaceID = "f089354e-8366-4e18-aea3-4cb4a3a50b48"
	exampleGraphModelID = "41ce06d1-d81b-4ea0-bc6d-2ce3dd2f8e87"
	examplePreview = true

	exampleRes := graphmodel.GraphType{
		EdgeTypes: []graphmodel.EdgeType{
			{
				Alias: to.Ptr("3ef6a474-ef38-4923-abcf-6f2e9230f1eb"),
				DestinationNodeType: &graphmodel.NodeTypeReference{
					Alias: to.Ptr("dced4642-b93d-4da4-815c-a171932043a4"),
				},
				Labels: []string{
					"customerProducts"},
				Properties: []graphmodel.Property{},
				SourceNodeType: &graphmodel.NodeTypeReference{
					Alias: to.Ptr("096a5133-fd82-4000-ac8a-404532ab6fd6"),
				},
			}},
		NodeTypes: []graphmodel.NodeType{
			{
				Alias: to.Ptr("096a5133-fd82-4000-ac8a-404532ab6fd6"),
				Labels: []string{
					"customer"},
				PrimaryKeyProperties: []string{
					"customerIDK"},
				Properties: []graphmodel.Property{
					{
						Name: to.Ptr("customerIDK"),
						Type: to.Ptr("INT"),
					},
					{
						Name: to.Ptr("firstName"),
						Type: to.Ptr("STRING"),
					},
					{
						Name: to.Ptr("lastName"),
						Type: to.Ptr("STRING"),
					},
					{
						Name: to.Ptr("fullName"),
						Type: to.Ptr("STRING"),
					}},
			},
			{
				Alias: to.Ptr("dced4642-b93d-4da4-815c-a171932043a4"),
				Labels: []string{
					"products"},
				PrimaryKeyProperties: []string{
					"productIDK"},
				Properties: []graphmodel.Property{
					{
						Name: to.Ptr("productIDK"),
						Type: to.Ptr("INT"),
					},
					{
						Name: to.Ptr("productNumber"),
						Type: to.Ptr("STRING"),
					},
					{
						Name: to.Ptr("productName"),
						Type: to.Ptr("STRING"),
					},
					{
						Name: to.Ptr("modelName"),
						Type: to.Ptr("STRING"),
					},
					{
						Name: to.Ptr("makeFlag"),
						Type: to.Ptr("INT"),
					},
					{
						Name: to.Ptr("standardCost"),
						Type: to.Ptr("FLOAT"),
					},
					{
						Name: to.Ptr("listPrice"),
						Type: to.Ptr("FLOAT"),
					},
					{
						Name: to.Ptr("subCategoryIDFK"),
						Type: to.Ptr("INT"),
					}},
			}},
	}

	testsuite.serverFactory.ItemsServer.GetQueryableGraphTypePreview = func(ctx context.Context, workspaceID string, graphModelID string, preview bool, options *graphmodel.ItemsClientGetQueryableGraphTypePreviewOptions) (resp azfake.Responder[graphmodel.ItemsClientGetQueryableGraphTypePreviewResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().Equal(exampleGraphModelID, graphModelID)
		testsuite.Require().Equal(examplePreview, preview)
		resp = azfake.Responder[graphmodel.ItemsClientGetQueryableGraphTypePreviewResponse]{}
		resp.SetResponse(http.StatusOK, graphmodel.ItemsClientGetQueryableGraphTypePreviewResponse{GraphType: exampleRes}, nil)
		return
	}

	client := testsuite.clientFactory.NewItemsClient()
	res, err := client.GetQueryableGraphTypePreview(ctx, exampleWorkspaceID, exampleGraphModelID, examplePreview, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
	testsuite.Require().True(reflect.DeepEqual(exampleRes, res.GraphType))
}

func (testsuite *FakeTestSuite) TestBackgroundJobs_RunOnDemandRefreshGraph() {
	// From example
	ctx := runtime.WithHTTPHeader(testsuite.ctx, map[string][]string{
		"example-id": {"Run on demand refresh graph job."},
	})
	var exampleWorkspaceID string
	var exampleGraphModelID string
	exampleWorkspaceID = "4b218778-e7a5-4d73-8187-f10824047715"
	exampleGraphModelID = "431e8d7b-4a95-4c02-8ccd-6faef5ba1bd7"

	testsuite.serverFactory.BackgroundJobsServer.RunOnDemandRefreshGraph = func(ctx context.Context, workspaceID string, graphModelID string, options *graphmodel.BackgroundJobsClientRunOnDemandRefreshGraphOptions) (resp azfake.Responder[graphmodel.BackgroundJobsClientRunOnDemandRefreshGraphResponse], errResp azfake.ErrorResponder) {
		testsuite.Require().Equal(exampleWorkspaceID, workspaceID)
		testsuite.Require().Equal(exampleGraphModelID, graphModelID)
		resp = azfake.Responder[graphmodel.BackgroundJobsClientRunOnDemandRefreshGraphResponse]{}
		resp.SetResponse(http.StatusOK, graphmodel.BackgroundJobsClientRunOnDemandRefreshGraphResponse{}, nil)
		return
	}

	client := testsuite.clientFactory.NewBackgroundJobsClient()
	_, err = client.RunOnDemandRefreshGraph(ctx, exampleWorkspaceID, exampleGraphModelID, nil)
	testsuite.Require().NoError(err, "Failed to get result for example ")
}
